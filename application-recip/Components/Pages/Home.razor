@page "/"
@inject AuthenticationStateProvider AuthenticationStateProvider

@using Microsoft.AspNetCore.Authentication

<PageTitle>Home</PageTitle>

<h1>Hello @firstname @lastname</h1>

<span>Welcome to your new app.</span>

@code
{
    private string firstname = "";

    private string lastname = "";

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        await GetClaimsPrincipalData();
    }

    private async Task GetClaimsPrincipalData()
    {
        var authState = await AuthenticationStateProvider
            .GetAuthenticationStateAsync();
        var user = authState.User;

        if (user.Identity is not null && user.Identity.IsAuthenticated)
        {
            firstname = user.FindFirst(c => c.Type == "firstname")?.Value;
            lastname = user.FindFirst(c => c.Type == "lastname")?.Value;
        }
    }
}